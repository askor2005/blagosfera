tinymce.PluginManager.add("radomgroupfields", function (editor) {
    editor.addButton("radomgroupfieldstart", {
        text: "[[",
        icon: false,
        tooltip : "Групповое поле начало",
        onclick: function() {
            var selection = editor.selection,
                dom = editor.dom,
                selectedElm,
                anchorElm;

            // Focus the editor since selection is lost on WebKit in inline mode
            /*editor.focus();

            var insertedContent = "<span data-placeholder class='mceNonEditable groupFieldStart' data-mce-contenteditable='false' >[[</span>&nbsp;&nbsp;";

            editor.selection.setContent(insertedContent);*/

            // Focus the editor since selection is lost on WebKit in inline mode
            editor.focus();

            showModal($("#groupFieldsWindow"));
            //$("#groupFieldsWindow").modal("show");
        }
    });
    editor.addButton("radomgroupfieldend", {
        text: "]]",
        icon: false,
        tooltip : "Групповое поле конец",
        onclick: function() {
            var selection = editor.selection,
                dom = editor.dom,
                selectedElm,
                anchorElm;

            // Focus the editor since selection is lost on WebKit in inline mode
            editor.focus();

            var insertedContent = "<span data-placeholder class='mceNonEditable groupFieldEnd' data-mce-contenteditable='false' >]]</span>&nbsp;";

            editor.selection.setContent(insertedContent);
        }
    });
});