tinymce.PluginManager.add("radomparticipantcustomfields", function (editor) {
    editor.addButton("radomparticipantcustomfields", {
        text: "Добавить пользовательское поле",
        icon: false,
        tooltip : "Добавить пользовательское поле",
        onclick: function() {
            var selection = editor.selection,
                dom = editor.dom,
                selectedElm,
                anchorElm;

            // Focus the editor since selection is lost on WebKit in inline mode
            editor.focus();

            var isMainModalVisible = $("#radomParticipantCustomFieldsWindow").is(":visible");
            var modalId = "#radomParticipantCustomFieldsWindow";
            if (isMainModalVisible) {
                modalId = "#userFieldsGroupsModal";
            }
            showModal($(modalId));
            //$(modalId).modal({backdrop: false, keyboard: false});
        }
    });
    editor.addButton("radomparticipantcustomfieldslist", {
        text: "Список пользовательских полей",
        icon: false,
        tooltip : "Список пользовательских полей",
        onclick: function() {
            var selection = editor.selection,
                dom = editor.dom,
                selectedElm,
                anchorElm;

            // Focus the editor since selection is lost on WebKit in inline mode
            editor.focus();
            showModal($("#userFieldsListWindow"));
        }
    });
});