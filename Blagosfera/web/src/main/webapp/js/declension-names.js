var RussianNameProcessor={sexM:"m",sexF:"f",gcaseIm:"nominative",gcaseNom:"nominative",gcaseRod:"genitive",gcaseGen:"genitive",gcaseDat:"dative",gcaseVin:"accusative",gcaseAcc:"accusative",gcaseTvor:"instrumentative",gcaseIns:"instrumentative",gcasePred:"prepositional",gcasePos:"prepositional",rules:{lastName:{exceptions:["	дюма,тома,дега,люка,ферма,гамарра,петипа,шандра . . . . .","	гусь,ремень,камень,онук,богода,нечипас,долгопалец,маненок,рева,кива . . . . .","	вий,сой,цой,хой -я -ю -я -ем -е"],suffixes:["f	б,в,г,д,ж,з,й,к,л,м,н,п,р,с,т,ф,х,ц,ч,ш,щ,ъ,ь . . . . .","f	ска,цка  -ой -ой -ую -ой -ой","f	ая       --ой --ой --ую --ой --ой","	ская     --ой --ой --ую --ой --ой","f	на       -ой -ой -у -ой -ой","	иной -я -ю -я -ем -е","	уй   -я -ю -я -ем -е","	ца   -ы -е -у -ей -е","	рих  а у а ом е","	ия                      . . . . .","	иа,аа,оа,уа,ыа,еа,юа,эа . . . . .","	их,ых                   . . . . .","	о,е,э,и,ы,у,ю           . . . . .","	ова,ева            -ой -ой -у -ой -ой","	га,ка,ха,ча,ща,жа  -и -е -у -ой -е","	ца  -и -е -у -ей -е","	а   -ы -е -у -ой -е","	ь   -я -ю -я -ем -е","	ия  -и -и -ю -ей -и","	я   -и -е -ю -ей -е","	ей  -я -ю -я -ем -е","	ян,ан,йн   а у а ом е","	ынец,обец  --ца --цу --ца --цем --це","	онец,овец  --ца --цу --ца --цом --це","	ц,ч,ш,щ   а у а ем е","	ай  -я -ю -я -ем -е","	гой,кой  -го -му -го --им -м","	ой  -го -му -го --ым -м","	ах,ив   а у а ом е","	ший,щий,жий,ний  --его --ему --его -м --ем","	кий,ый   --ого --ому --ого -м --ом","	ий       -я -ю -я -ем -и","	ок  --ка --ку --ка --ком --ке","	ец  --ца --цу --ца --цом --це","	в,н   а у а ым е","	б,г,д,ж,з,к,л,м,п,р,с,т,ф,х   а у а ом е"]},firstName:{exceptions:["	лев    --ьва --ьву --ьва --ьвом --ьве","	павел  --ла  --лу  --ла  --лом  --ле","m	шота   . . . . .","m	пётр   ---етра ---етру ---етра ---етром ---етре","f	рашель,нинель,николь,габриэль,даниэль   . . . . ."],suffixes:["	е,ё,и,о,у,ы,э,ю   . . . . .","f	б,в,г,д,ж,з,й,к,л,м,н,п,р,с,т,ф,х,ц,ч,ш,щ,ъ   . . . . .","f	ь   -и -и . ю -и","m	ь   -я -ю -я -ем -е","	га,ка,ха,ча,ща,жа  -и -е -у -ой -е","	а   -ы -е -у -ой -е","	ия  -и -и -ю -ей -и","	я   -и -е -ю -ей -е","	ей  -я -ю -я -ем -е","	ий  -я -ю -я -ем -и","	й   -я -ю -я -ем -е","	б,в,г,д,ж,з,к,л,м,н,п,р,с,т,ф,х,ц,ч	 а у а ом е"]},middleName:{suffixes:["	ич   а  у  а  ем  е","	на  -ы -е -у -ой -е"]}},initialized:false,init:function(){if(this.initialized){return}this.prepareRules();this.initialized=true},prepareRules:function(){for(var c in this.rules){for(var b in this.rules[c]){for(var a=0,d=this.rules[c][b].length;a<d;a++){this.rules[c][b][a]=this.rule(this.rules[c][b][a])}}}},rule:function(b){var a=b.match(/^\s*([fm]?)\s*(\S+)\s+(\S+)\s+(\S+)\s+(\S+)\s+(\S+)\s+(\S+)\s*$/);if(a){return{sex:a[1],test:a[2].split(","),mods:[a[3],a[4],a[5],a[6],a[7]]}}return false},word:function(a,g,c,j){if(j==this.gcaseNom){return a}if(a.match(/[-]/)){var f=a.split("-");for(var d=0,b=f.length;d<b;d++){f[d]=this.word(f[d],g,c,j)}return f.join("-")}if(a.match(/^[А-ЯЁ]\.?$/i)){return a}this.init();var h=this.rules[c];if(h.exceptions){var e=this.pick(a,g,j,h.exceptions,true);if(e){return e}}var e=this.pick(a,g,j,h.suffixes,false);return e||a},pick:function(e,d,c,f,a){wordLower=e.toLowerCase();for(var b=0,g=f.length;b<g;b++){if(this.ruleMatch(wordLower,d,f[b],a)){return this.applyMod(e,c,f[b])}}return false},ruleMatch:function(e,c,d,a){if(d.sex==this.sexM&&c==this.sexF){return false}if(d.sex==this.sexF&&c!=this.sexF){return false}for(var b=0,g=d.test.length;b<g;b++){var f=a?e:e.substr(Math.max(e.length-d.test[b].length,0));if(f==d.test[b]){return true}}return false},applyMod:function(f,d,e){switch(d){case this.gcaseNom:var b=".";break;case this.gcaseGen:var b=e.mods[0];break;case this.gcaseDat:var b=e.mods[1];break;case this.gcaseAcc:var b=e.mods[2];break;case this.gcaseIns:var b=e.mods[3];break;case this.gcasePos:var b=e.mods[4];break;default:throw"Unknown grammatic case: "+d}for(var a=0,h=b.length;a<h;a++){var g=b.substr(a,1);switch(g){case".":break;case"-":f=f.substr(0,f.length-1);break;default:f+=g}}return f}};var RussianName=function(c,d,b,e){if(typeof d=="undefined"){var a=c.match(/^\s*(\S+)(\s+(\S+)(\s+(\S+))?)?\s*$/);if(!a){throw"Cannot parse supplied name"}if(a[5]&&a[3].match(/(ич|на)$/)&&!a[5].match(/(ич|на)$/)){c=a[5];d=a[1];b=a[3];this.fullNameSurnameLast=true}else{c=a[1];d=a[3];b=a[5]}}this.ln=c;this.fn=d||"";this.mn=b||"";this.sex=e||this.getSex()};RussianName.prototype={sexM:RussianNameProcessor.sexM,sexF:RussianNameProcessor.sexF,gcaseIm:RussianNameProcessor.gcaseIm,gcaseNom:RussianNameProcessor.gcaseNom,gcaseRod:RussianNameProcessor.gcaseRod,gcaseGen:RussianNameProcessor.gcaseGen,gcaseDat:RussianNameProcessor.gcaseDat,gcaseVin:RussianNameProcessor.gcaseVin,gcaseAcc:RussianNameProcessor.gcaseAcc,gcaseTvor:RussianNameProcessor.gcaseTvor,gcaseIns:RussianNameProcessor.gcaseIns,gcasePred:RussianNameProcessor.gcasePred,gcasePos:RussianNameProcessor.gcasePos,fullNameSurnameLast:false,ln:"",fn:"",mn:"",sex:"",getSex:function(){if(this.mn.length>2){switch(this.mn.substr(this.mn.length-2)){case"ич":return this.sexM;case"на":return this.sexF}}return""},fullName:function(a){return((this.fullNameSurnameLast?"":this.lastName(a)+" ")+this.firstName(a)+" "+this.middleName(a)+(this.fullNameSurnameLast?" "+this.lastName(a):"")).replace(/^ +| +$/g,"")},lastName:function(a){return RussianNameProcessor.word(this.ln,this.sex,"lastName",a)},firstName:function(a){return RussianNameProcessor.word(this.fn,this.sex,"firstName",a)},middleName:function(a){return RussianNameProcessor.word(this.mn,this.sex,"middleName",a)}};